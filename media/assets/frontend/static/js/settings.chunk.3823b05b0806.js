(this["webpackJsonpdtable-web"]=this["webpackJsonpdtable-web"]||[]).push([[8],{126:function(e,t,a){"use strict";var n=a(6);t.a=function e(t){Object(n.a)(this,e),this.id=t.id||"",this.group_id=t.group_id||"",this.owner_name=t.owner_name||"",this.owner_type=t.owner_type||"",this.table_list=t.table_list||[],this.group_owner=t.group_owner||"",this.group_admins=t.group_admins||[],this.group_shared_tables=[]}},1365:function(e,t,a){"use strict";a.r(t);var n=a(6),s=a(7),i=a(10),r=a(8),o=a(9),c=a(0),l=a.n(c),u=a(22),m=a.n(u),d=a(13),h=a(2),b=a(14),p=a(18),f=function(e){function t(e){return Object(n.a)(this,t),Object(i.a)(this,Object(r.a)(t).call(this,e))}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("ul",{className:"nav flex-column user-setting-nav"},this.props.data.map((function(t,a){return t.show?l.a.createElement("li",{key:a,className:"nav-item ".concat(e.props.curItemID===t.href.substr(1)&&"active")},l.a.createElement("a",{className:"nav-link",href:t.href},t.text)):null})))}}]),t}(l.a.Component),g=window.app.pageOptions,v=g.avatarURL,E=g.csrfToken,O=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).fileInputChange=function(){if(a.fileInput.current.files.length){var e=a.fileInput.current.files[0],t=e.name;if(-1===t.lastIndexOf("."))return p.a.danger(Object(h.A)("Please choose an image file."),{duration:5}),!1;var n=t.substr(t.lastIndexOf(".")+1).toLowerCase(),s=["jpg","jpeg","png","gif"];if(-1===s.indexOf(n)){var i=Object(h.A)("File extensions can only be {placeholder}.").replace("{placeholder}",s.join(", "));return p.a.danger(i,{duration:5}),!1}if(e.size>1048576){var r=Object(h.A)("The file is too large. Allowed maximum size is 1MB.");return p.a.danger(r,{duration:5}),!1}b.a.updateUserAvatar(e,160).then((function(e){a.setState({avatarSrc:e.data.avatar_url}),p.a.success(Object(h.A)("Success"))})).catch((function(e){var t=d.a.getErrorMsg(e);p.a.danger(t)}))}},a.openFileInput=function(){a.fileInput.current.click()},a.handleMouseOver=function(){a.setState({isEditShown:!0})},a.handleMouseOut=function(){a.setState({isEditShown:!1})},a.fileInput=l.a.createRef(),a.form=l.a.createRef(),a.state={avatarSrc:v,isEditShown:!1},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"form-group row"},l.a.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:E}),l.a.createElement("label",{className:"col-sm-1 col-form-label"},Object(h.A)("Avatar:")),l.a.createElement("div",{className:"col-auto position-relative",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},l.a.createElement("img",{src:this.state.avatarSrc,width:"80",height:"80",alt:"",className:"user-avatar"}),l.a.createElement("input",{type:"file",name:"avatar",className:"d-none",onChange:this.fileInputChange,ref:this.fileInput}),l.a.createElement("span",{className:"avatar-edit dtable-font dtable-icon-rename ".concat(!this.state.isEditShown&&"d-none"),onClick:this.openFileInput})))}}]),t}(l.a.Component),N=window.app.pageOptions,C=N.nameLabel,j=N.enableUpdateUserInfo,w=N.enableUserSetContactEmail,S=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).handleNameInputChange=function(e){a.setState({name:e.target.value})},a.handleContactEmailInputChange=function(e){a.setState({contactEmail:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t={name:a.state.name};w&&(t.contact_email=a.state.contactEmail),a.props.updateUserInfo(t)};var s=a.props.userInfo,o=s.contact_email,c=s.login_id,l=s.name;return a.state={contactEmail:o,loginID:c,name:l},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.contactEmail,a=e.loginID,n=e.name;return l.a.createElement("form",{action:"",method:"post",onSubmit:this.handleSubmit},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-sm-1 col-form-label",htmlFor:"name"},C),l.a.createElement("div",{className:"col-sm-5"},l.a.createElement("input",{className:"form-control",id:"name",type:"text",name:"nickname",value:n,disabled:!j,onChange:this.handleNameInputChange}))),a&&l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-sm-1 col-form-label",htmlFor:"user-name"},Object(h.A)("Username:")),l.a.createElement("div",{className:"col-sm-5"},l.a.createElement("input",{className:"form-control",id:"user-name",type:"text",name:"username",value:a,disabled:!0,readOnly:!0})),l.a.createElement("p",{className:"col-sm-5 m-0 input-tip"},Object(h.A)("You can use this field at login."))),(t||w)&&l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-sm-1 col-form-label",htmlFor:"contact-email"},Object(h.A)("Contact Email:")),l.a.createElement("div",{className:"col-sm-5"},l.a.createElement("input",{className:"form-control",id:"contact-email",type:"text",name:"contact_email",value:t,disabled:!w,readOnly:!w,onChange:this.handleContactEmailInputChange})),l.a.createElement("p",{className:"col-sm-5 m-0 input-tip"},Object(h.A)("Your notifications will be sent to this email."))),l.a.createElement("button",{type:"submit",className:"btn btn-outline-primary offset-sm-1",disabled:!j},Object(h.A)("Submit")))}}]),t}(l.a.Component),k=a(49),y=a(5),A=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).submit=function(){a.setState({btnDisabled:!0}),a.props.updatePassword(a.state.password)},a.handleInputChange=function(e){var t=e.target.value.trim();a.setState({password:t})},a.togglePasswordVisible=function(){a.setState({isPasswordVisible:!a.state.isPasswordVisible})},a.generatePassword=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<8;n++)e+=t.charAt(Math.floor(Math.random()*t.length));a.setState({password:e,isPasswordVisible:!0})},a.state={password:a.props.password,isPasswordVisible:!1,btnDisabled:!1},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.toggle;return l.a.createElement(y.o,{centered:!0,isOpen:!0,toggle:e},l.a.createElement(y.r,{toggle:e},Object(h.A)("WebDav Password")),l.a.createElement(y.p,null,l.a.createElement(y.k,{className:""},l.a.createElement(y.j,{type:this.state.isPasswordVisible?"text":"password",value:this.state.password,onChange:this.handleInputChange}),l.a.createElement(y.l,{addonType:"append"},l.a.createElement(y.b,{onClick:this.togglePasswordVisible},l.a.createElement("i",{className:"dtable-font ".concat(this.state.isPasswordVisible?"dtable-icon-eye":"dtable-icon-eye-slash")})),l.a.createElement(y.b,{onClick:this.generatePassword},l.a.createElement("i",{className:"dtable-font dtable-icon-random-generation"}))))),l.a.createElement(y.q,null,l.a.createElement(y.b,{color:"secondary",onClick:e},Object(h.A)("Cancel")),l.a.createElement(y.b,{color:"primary",onClick:this.submit,disabled:this.state.btnDisabled},Object(h.A)("Submit"))))}}]),t}(c.Component),I=window.app.pageOptions.webdavPasswd,_=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).togglePasswordVisible=function(){a.setState({isPasswordVisible:!a.state.isPasswordVisible})},a.updatePassword=function(e){b.a.updateWebdavSecret(e).then((function(t){a.toggleDialog(),a.setState({password:e}),p.a.success(Object(h.A)("Success"))})).catch((function(e){var t=d.a.getErrorMsg(e);a.toggleDialog(),p.a.danger(t)}))},a.toggleDialog=function(){a.setState({isDialogOpen:!a.state.isDialogOpen})},a.state={password:I,isPasswordVisible:!1,isDialogOpen:!1},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.password,a=e.isPasswordVisible;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"update-webdav-passwd",className:"setting-item"},l.a.createElement("h3",{className:"setting-item-heading"},Object(h.A)("WebDav Password")),t?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("label",{className:"m-0 mr-2"},Object(h.A)("Password:")),l.a.createElement("input",{className:"border-0 mr-1",type:"text",value:a?t:"**********",readOnly:!0,size:Math.max(t.length,10)}),l.a.createElement("span",{onClick:this.togglePasswordVisible,className:"eye-icon dtable-font ".concat(this.state.isPasswordVisible?"dtable-icon-eye":"dtable-icon-eye-slash")})),l.a.createElement("button",{className:"btn btn-outline-primary mt-2",onClick:this.toggleDialog},Object(h.A)("Update"))):l.a.createElement("button",{className:"btn btn-outline-primary",onClick:this.toggleDialog},Object(h.A)("Set Password"))),this.state.isDialogOpen&&l.a.createElement(k.a,null,l.a.createElement(A,{password:this.state.password,updatePassword:this.updatePassword,toggle:this.toggleDialog})))}}]),t}(l.a.Component),P=a(56),D=window.app.pageOptions,x=D.currentLang,V=D.langList,M=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).onSelectChange=function(e){location.href="".concat(h.V,"i18n/?lang=").concat(e.value)},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=V.map((function(e,t){return{value:e.langCode,label:e.langName}}));return l.a.createElement("div",{className:"setting-item",id:"lang-setting"},l.a.createElement("h3",{className:"setting-item-heading"},Object(h.A)("Language Setting")),l.a.createElement(P.b,{className:"language-selector",defaultValue:{value:x.langCode,label:x.langName},options:e,onChange:this.onSelectChange}))}}]),t}(l.a.Component),U=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.checked;a.setState({inputChecked:t}),a.props.updateUserInfo({list_in_address_book:t.toString()})};var s=a.props.userInfo.list_in_address_book;return a.state={inputChecked:s},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.inputChecked;return l.a.createElement("div",{className:"setting-item",id:"list-in-address-book"},l.a.createElement("h3",{className:"setting-item-heading"},Object(h.A)("Global Address Book")),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("input",{type:"checkbox",id:"list-in-address-book",name:"list_in_address_book",className:"mr-1",checked:e,onChange:this.handleInputChange}),l.a.createElement("label",{htmlFor:"list-in-address-book",className:"m-0"},Object(h.A)("List your account in global address book, so that others can find you by typing your name."))))}}]),t}(l.a.Component),R=window.app.pageOptions,T=R.defaultDevice,H=R.backupTokens,F=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).renderEnabled=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"mb-2"},Object(h.A)("Status: enabled")),l.a.createElement("a",{className:"btn btn-outline-primary mb-4",href:"".concat(h.V,"profile/two_factor_authentication/disable/")},Object(h.A)("Disable Two-Factor Authentication")),l.a.createElement("p",{className:"mb-2"},Object(h.A)("If you don't have any device with you, you can access your account using backup codes."),1===H?Object(h.A)("You have only one backup code remaining."):Object(h.A)("You have {num} backup codes remaining.").replace("{num}",H)),l.a.createElement("a",{href:"".concat(h.V,"profile/two_factor_authentication/backup/tokens/"),className:"btn btn-outline-primary"},Object(h.A)("Show Codes")))},a.renderDisabled=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"mb-2"},Object(h.A)("Two-factor authentication is not enabled for your account. Enable two-factor authentication for enhanced account security.")),l.a.createElement("a",{href:"".concat(h.V,"profile/two_factor_authentication/setup/"),className:"btn btn-outline-primary"},Object(h.A)("Enable Two-Factor Authentication")))},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"setting-item",id:"two-factor-auth"},l.a.createElement("h3",{className:"setting-item-heading"},Object(h.A)("Two-Factor Authentication")),T?this.renderEnabled():this.renderDisabled())}}]),t}(l.a.Component),B=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).disconnect=function(){a.form.current.submit()},a.form=l.a.createRef(),a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.formActionURL,a=e.csrfToken,n=e.toggle;return l.a.createElement(y.o,{centered:!0,isOpen:!0,toggle:n},l.a.createElement(y.r,{toggle:n},Object(h.A)("Disconnect")),l.a.createElement(y.p,null,l.a.createElement("p",null,Object(h.A)("Are you sure you want to disconnect?")),l.a.createElement("form",{ref:this.form,className:"d-none",method:"post",action:t},l.a.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:a}))),l.a.createElement(y.q,null,l.a.createElement(y.b,{color:"secondary",onClick:n},Object(h.A)("Cancel")),l.a.createElement(y.b,{color:"primary",onClick:this.disconnect},Object(h.A)("Disconnect"))))}}]),t}(c.Component),L=window.app.pageOptions,W=L.csrfToken,q=L.langCode,G=L.enableWorkWeixin,z=L.enableWeixin,Y=L.workWixinConnected,J=L.wixinConnected,K=L.socialNextPage,Q=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).confirmDisconnect=function(e){a.setState({isConfirmDialogOpen:!0,disconnectType:e})},a.toggleDialog=function(){a.setState({isConfirmDialogOpen:!a.state.isConfirmDialogOpen})},a.state={isConfirmDialogOpen:!1,disconnectType:""},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e="workWeixin"===this.state.disconnectType?"".concat(h.V,"work-weixin/oauth-disconnect/?next=").concat(encodeURIComponent(K)):"".concat(h.V,"weixin/oauth-disconnect/?next=").concat(encodeURIComponent(K));return l.a.createElement(c.Fragment,null,l.a.createElement("div",{className:"setting-item",id:"social-auth"},l.a.createElement("h3",{className:"setting-item-heading"},Object(h.A)("Social Login")),G&&l.a.createElement("div",{className:"mb-4"},l.a.createElement("p",{className:"mb-2"},"zh-cn"===q?"\u4f01\u4e1a\u5fae\u4fe1":"Work Weixin"),Y?l.a.createElement("button",{className:"btn btn-outline-primary",onClick:this.confirmDisconnect.bind(this,"workWeixin")},Object(h.A)("Disconnect")):l.a.createElement("a",{href:"".concat(h.V,"work-weixin/oauth-connect/?next=").concat(encodeURIComponent(K)),className:"btn btn-outline-primary"},Object(h.A)("Connect"))),z&&l.a.createElement("div",{className:"mb-4"},l.a.createElement("p",{className:"mb-2"},"zh-cn"===q?"\u5fae\u4fe1":"WeChat"),J?l.a.createElement("button",{className:"btn btn-outline-primary",onClick:this.confirmDisconnect.bind(this,"weixin")},Object(h.A)("Disconnect")):l.a.createElement("a",{href:"".concat(h.V,"weixin/oauth-connect/?next=").concat(encodeURIComponent(K)),className:"btn btn-outline-primary"},Object(h.A)("Connect")))),this.state.isConfirmDialogOpen&&l.a.createElement(k.a,null,l.a.createElement(B,{formActionURL:e,csrfToken:W,toggle:this.toggleDialog})))}}]),t}(l.a.Component),X=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).action=function(){a.form.current.submit()},a.form=l.a.createRef(),a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.formActionURL,a=e.csrfToken,n=e.toggle;return l.a.createElement(y.o,{centered:!0,isOpen:!0,toggle:n},l.a.createElement(y.r,{toggle:n},Object(h.A)("Delete Account")),l.a.createElement(y.p,null,l.a.createElement("p",null,Object(h.A)("Really want to delete your account?")),l.a.createElement("form",{ref:this.form,className:"d-none",method:"post",action:t},l.a.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:a}))),l.a.createElement(y.q,null,l.a.createElement(y.b,{color:"secondary",onClick:n},Object(h.A)("Cancel")),l.a.createElement(y.b,{color:"primary",onClick:this.action},Object(h.A)("Delete"))))}}]),t}(c.Component),Z=window.app.pageOptions.csrfToken,$=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).confirmDelete=function(e){e.preventDefault(),a.setState({isConfirmDialogOpen:!0})},a.toggleDialog=function(){a.setState({isConfirmDialogOpen:!a.state.isConfirmDialogOpen})},a.state={isConfirmDialogOpen:!1},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"setting-item",id:"del-account"},l.a.createElement("h3",{className:"setting-item-heading"},Object(h.A)("Delete Account")),l.a.createElement("p",{className:"mb-2"},Object(h.A)("This operation will not be reverted. Please think twice!")),l.a.createElement("button",{className:"btn btn-outline-primary",onClick:this.confirmDelete},Object(h.A)("Delete"))),this.state.isConfirmDialogOpen&&l.a.createElement(k.a,null,l.a.createElement(X,{formActionURL:"".concat(h.V,"profile/delete/"),csrfToken:Z,toggle:this.toggleDialog})))}}]),t}(l.a.Component),ee={BOUND_PHONE:"bound_phone",UNBOUND_PHONE:"unbound_phone",BINDING_PHONE:"binding_phone"},te=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).onChangePhoneNumber=function(e){var t=e.target.value.trim();a.setState({newPhoneNumber:t})},a.onChangeVerifyCode=function(e){var t=e.target.value.trim();a.setState({inputVerifyCode:t})},a.validPhone=function(){return null!==a.state.newPhoneNumber.match(/^1[345678]\d{9}$/g)},a.validCode=function(){return""!==a.state.verifyCode},a.setSendCodeTimer=function(){a.timer=setInterval((function(){var e=a.state.intervalCount;if(e){var t=e-1,n=Object(h.A)("Resend after {count}s").replace("{count}",t);a.setState({intervalCount:t,verifyCodeMessage:n})}else{clearInterval(a.timer);var s=Object(h.A)("Send Verify Code");a.setState({phoneNumberMessage:"",isSendCodeError:!1,verifyCodeMessage:s,isSendCodeAvailable:!0,intervalCount:60})}}),1e3)},a.onSendCode=function(){if(a.validPhone()){b.a.sendVerifyCode(a.state.newPhoneNumber,"bind_phone").then((function(e){var t=Object(h.A)("Verify code has been sent.");a.setState({bindState:ee.BINDING_PHONE,phoneNumberMessage:t,isSendCodeError:!1,isVerifyCodeRequired:!0,isSendCodeAvailable:!1}),a.setSendCodeTimer()})).catch((function(e){var t="";t=400===e.response.status?Object(h.A)("Phone number is invalid."):429===e.response.status?Object(h.A)("Send code too often, please send later."):500===e.response.status?Object(h.A)("Internal Server Error."):Object(h.A)("Please check the network."),a.setState({phoneNumberMessage:t,isSendCodeError:!0})}))}else{var e=Object(h.A)("Phone number is invalid.");a.setState({phoneNumberMessage:e,isSendCodeError:!0})}},a.bindPhoneNumber=function(){if(a.validPhone()&&a.validCode()){var e=a.state,t=e.newPhoneNumber,n=e.inputVerifyCode;b.a.bindPhoneNumber(t,n).then((function(e){var t=Object(h.A)("Phone number has been bound successfully.");a.timer&&clearInterval(a.timer),a.setState({bindState:ee.BOUND_PHONE,phoneNumberMessage:t,isSendCodeError:!1,inputVerifyCode:"",verifyCodeMessage:"",isVerifyCodeRequired:!1,isSendCodeAvailable:!1,intervalCount:60})})).catch((function(e){var t="";t=400===e.response.status?Object(h.A)("Phone number is invalid."):403===e.response.status?Object(h.A)("Code is incorrect."):500===e.response.status?Object(h.A)("Internal Server Error."):Object(h.A)("Please check the network."),a.setState({phoneNumberMessage:t,isSendCodeError:!0})}))}else{var s=Object(h.A)("Phone number or code is invalid.");a.setState({phoneNumberMessage:s,isSendCodeError:!0})}},a.updatePhoneNumber=function(){var e=Object(h.A)("Send Verify Code");a.setState({bindState:ee.UNBOUND_PHONE,isSendCodeAvailable:!0,verifyCodeMessage:e})},a.state={bindState:ee.UNBOUND_PHONE,oldPhoneNumber:e.oldBindPhone,newPhoneNumber:e.oldBindPhone,phoneNumberMessage:"",isSendCodeError:!1,inputVerifyCode:"",verifyCodeMessage:"",isVerifyCodeRequired:!1,isSendCodeAvailable:!1,intervalCount:60},a.timter=null,a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){if(this.props.oldBindPhone)this.setState({bindState:ee.BOUND_PHONE});else{var e=Object(h.A)("Send Verify Code");this.setState({bindState:ee.UNBOUND_PHONE,verifyCodeMessage:e,isSendCodeAvailable:!0})}}},{key:"render",value:function(){var e=this.state,t=e.bindState,a=e.newPhoneNumber,n=e.phoneNumberMessage,s=e.isVerifyCodeRequired,i=e.isSendCodeAvailable,r=e.inputVerifyCode,o=e.verifyCodeMessage,c=t!==ee.BOUND_PHONE;return l.a.createElement("div",{id:"bind-phone",className:"bind-phone-module setting-item"},l.a.createElement("h3",{className:"setting-item-heading"},Object(h.A)("Bind Phone Number")),l.a.createElement("div",{className:"bind-phone-container"},l.a.createElement(y.i,{row:!0},l.a.createElement(y.c,{className:"col-sm-9 row"},l.a.createElement(y.j,{className:"phone-number",value:a,onChange:this.onChangePhoneNumber,readOnly:!c}),this.state.phoneNumberMessage&&l.a.createElement("div",{className:"col-sm-auto ml-1 bind-phone-message"},this.state.isSendCodeError?l.a.createElement("i",{className:"dtable-font dtable-icon-exclamation-circle error"}):l.a.createElement("i",{className:"dtable-font dtable-icon-check-circle success"}),l.a.createElement("span",{className:"ml-1 ".concat(this.state.isSendCodeError?"error":"success")},n)))),this.state.bindState!==ee.BOUND_PHONE&&l.a.createElement(y.i,{row:!0},l.a.createElement(y.c,{className:"col-sm-9 row"},s?l.a.createElement("div",{className:"verify-code-container"},l.a.createElement(y.j,{className:"verify-code",value:r,onChange:this.onChangeVerifyCode}),l.a.createElement("button",{className:"col-sm-auto btn btn-outline-".concat(i?"custom":"disabled"," ").concat(s?"ml-1":""),onClick:this.onSendCode,disabled:!i},o)):l.a.createElement("button",{className:"btn btn-outline-".concat(i?"primary":"disabled"," ").concat(s?"ml-1":""),onClick:this.onSendCode,disabled:!i},o))),this.state.bindState===ee.BINDING_PHONE&&s&&l.a.createElement(y.i,{className:"row"},l.a.createElement("button",{className:"btn btn-outline-".concat(r?"primary":"disabled"),onClick:this.bindPhoneNumber,disabled:!r},Object(h.A)("Bind Phone Number"))),this.state.bindState===ee.BOUND_PHONE&&l.a.createElement(y.i,{className:"row"},l.a.createElement("button",{className:"btn btn-outline-primary",onClick:this.updatePhoneNumber},Object(h.A)("Update Phone Number")))))}}]),t}(l.a.Component),ae=window.app.pageOptions.initialEmailNotificationInterval,ne=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).inputChange=function(e){e.target.checked&&a.setState({currentInterval:parseInt(e.target.value)})},a.formSubmit=function(e){e.preventDefault(),b.a.updateEmailNotificationInterval(a.state.currentInterval).then((function(e){p.a.success(Object(h.A)("Success"))})).catch((function(e){var t=d.a.getErrorMsg(e);p.a.danger(t)}))},a.intervalOptions=[{interval:0,text:Object(h.A)("Don't send emails")},{interval:3600,text:Object(h.A)("Per hour")},{interval:14400,text:Object(h.A)("Per 4 hours")},{interval:86400,text:Object(h.A)("Per day")},{interval:604800,text:Object(h.A)("Per week")}],a.state={currentInterval:ae},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.currentInterval;return l.a.createElement("div",{className:"setting-item",id:"email-notice"},l.a.createElement("h3",{className:"setting-item-heading"},Object(h.A)("Email Notification of Table Changes")),l.a.createElement("p",{className:"mb-1"},Object(h.A)("The list of inserted, deleted and modified rows will be sent to your mailbox.")),l.a.createElement("form",{method:"post",action:"",id:"set-email-notice-interval-form",onSubmit:this.formSubmit},this.intervalOptions.map((function(a,n){return l.a.createElement(l.a.Fragment,{key:n},l.a.createElement("input",{type:"radio",name:"interval",value:a.interval,className:"align-middle",id:"interval-option".concat(n+1),checked:t===a.interval,onChange:e.inputChange}),l.a.createElement("label",{className:"align-middle m-0 ml-2",htmlFor:"interval-option".concat(n+1)},a.text),l.a.createElement("br",null))})),l.a.createElement("button",{type:"submit",className:"btn btn-outline-primary mt-2"},Object(h.A)("Submit"))))}}]),t}(l.a.Component),se=a(92),ie=a(261),re=a(262),oe=(a(313),a(790),a(791),a(314),window.app.pageOptions),ce=oe.canUpdatePassword,le=oe.passwordOperationText,ue=oe.userUnusablePassword,me=oe.enableAddressBook,de=oe.enableWebdavSecret,he=oe.twoFactorAuthEnabled,be=oe.enableWorkWeixin,pe=oe.enableWeixin,fe=oe.enableDeleteAccount,ge=oe.enableBindPhone,ve=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).updateUserInfo=function(e){b.a.updateUserInfo(e).then((function(e){a.setState({userInfo:e.data}),p.a.success(Object(h.A)("Success"))})).catch((function(e){var t=d.a.getErrorMsg(e);p.a.danger(t)}))},a.onSearchedClick=function(e){var t=h.V+"workspace/"+e.workspace_id+"/dtable/"+e.name+"/";location.href=t},a.handleContentScroll=function(e){var t=e.target.scrollTop,n=a.sideNavItems.filter((function(e,a){return e.show&&document.getElementById(e.href.substr(1)).offsetTop-45<t}));n.length&&a.setState({curItemID:n[n.length-1].href.substr(1)})},a.sideNavItems=[{show:!0,href:"#user-basic-info",text:Object(h.A)("Profile")},{show:ce,href:"#update-user-passwd",text:Object(h.A)("Password")},{show:ge,href:"#bind-phone",text:Object(h.A)("Bind Phone Number")},{show:de,href:"#update-webdav-passwd",text:Object(h.A)("WebDav Password")},{show:me,href:"#list-in-address-book",text:Object(h.A)("Global Address Book")},{show:!0,href:"#lang-setting",text:Object(h.A)("Language")},{show:h.F,href:"#email-notice",text:Object(h.A)("Email Notification")},{show:he,href:"#two-factor-auth",text:Object(h.A)("Two-Factor Authentication")},{show:be||pe,href:"#social-auth",text:Object(h.A)("Social Login")},{show:fe,href:"#del-account",text:Object(h.A)("Delete Account")}],a.state={curItemID:a.sideNavItems[0].href.substr(1),userInfo:null},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.getUserInfo().then((function(t){e.setState({userInfo:t.data})})).catch((function(e){var t=d.a.getErrorMsg(e);p.a.danger(t)}))}},{key:"render",value:function(){var e=Object(h.A)("Search bases");return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"h-100 d-flex flex-column"},l.a.createElement("div",{className:"top-header d-flex justify-content-between"},l.a.createElement("a",{href:h.V},l.a.createElement("img",{src:h.M+h.K,height:h.J,width:h.L,title:h.W,alt:"logo"})),l.a.createElement("div",{className:"common-toolbar"},l.a.createElement(re.a,{placeholder:e,onSearchedClick:this.onSearchedClick}),l.a.createElement(ie.a,null),l.a.createElement(se.a,null))),l.a.createElement("div",{className:"flex-auto d-flex o-hidden"},l.a.createElement("div",{className:"side-panel o-auto"},l.a.createElement(f,{data:this.sideNavItems,curItemID:this.state.curItemID})),l.a.createElement("div",{className:"main-panel d-flex flex-column"},l.a.createElement("h2",{className:"heading"},Object(h.A)("Settings")),l.a.createElement("div",{className:"content position-relative",onScroll:this.handleContentScroll},l.a.createElement("div",{id:"user-basic-info",className:"setting-item"},l.a.createElement("h3",{className:"setting-item-heading"},Object(h.A)("Profile Setting")),l.a.createElement(O,null),this.state.userInfo&&l.a.createElement(S,{userInfo:this.state.userInfo,updateUserInfo:this.updateUserInfo})),ce&&l.a.createElement("div",{id:"update-user-passwd",className:"setting-item"},l.a.createElement("h3",{className:"setting-item-heading"},Object(h.A)("Password")),ue&&l.a.createElement("p",null,Object(h.A)("You have not set a password yet. Setting a password and binding a phone number or an email will enable you to login via phone number or email.")),l.a.createElement("a",{href:"".concat(h.V,"accounts/password/change/"),className:"btn btn-outline-primary"},le)),ge&&this.state.userInfo&&l.a.createElement(te,{oldBindPhone:this.state.userInfo.bind_phone}),de&&l.a.createElement(_,null),me&&this.state.userInfo&&l.a.createElement(U,{userInfo:this.state.userInfo,updateUserInfo:this.updateUserInfo}),l.a.createElement(M,null),h.F&&l.a.createElement(ne,null),he&&l.a.createElement(F,null),(be||pe)&&l.a.createElement(Q,null),fe&&l.a.createElement($,null))))))}}]),t}(l.a.Component);m.a.render(l.a.createElement(ve,null),document.getElementById("wrapper"))},261:function(e,t,a){"use strict";var n=a(6),s=a(7),i=a(10),r=a(8),o=a(9),c=a(0),l=a.n(c),u=a(14),m=a(2),d=a(20),h=a.n(d);h.a.locale(m.G);var b=function(e){function t(){var e,a;Object(n.a)(this,t);for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o)))).onNoticeItemClick=function(){var e=a.props.noticeItem;!0!==e.seen&&a.props.onNoticeItemClick(e)},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"generatorNoticeInfo",value:function(){var e=this.props.noticeItem,t=e.type,a=e.detail;if("share_dtable_to_user"===t){var n=a.share_from.share_from_user_avatar_url,s=a.share_from.share_from_user_name,i=a.dtable.name,r='<a href="'+(m.V+"workspace/"+a.dtable.workspace_id+"/dtable/"+i+"/")+'" >'+i+"</a>",o=Object(m.A)("{share_from} has shared a table named {dtable_link} to you.");return{avatar_url:n,notice:o=(o=o.replace("{share_from}",s)).replace("{dtable_link}",r)}}if("submit_form"===t){var c=a.form,l=a.submit_user,u=c.form_name,d=l.submit_user_avatar_url,h=l.submit_user_name;return{avatar_url:d,notice:h?Object(m.A)("{submitUser} has submmited form {formName}.").replace("{submitUser}",h).replace("{formName}",u):Object(m.A)("Anonymous user has submmited form {formName}.").replace("{formName}",u)}}if("add_user_to_group"===t){var b=a.group_staff_avatar_url,p=a.group_staff_name,f=m.V+"profile/"+a.group_staff_email+"/",g=a.group_name,v=Object(m.A)("{user_link} has added you to {group}"),E="<a href="+f+">"+p+"</a>";return{avatar_url:b,notice:v=(v=v.replace("{user_link}",E)).replace("{group}",g)}}return{avatar_url:null,notice:null}}},{key:"render",value:function(){var e=this.props.noticeItem,t=this.generatorNoticeInfo(),a=t.avatar_url,n=t.notice;return a||n?l.a.createElement("li",{onClick:this.onNoticeItemClick,className:e.seen?"read":"unread"},l.a.createElement("div",{className:"notice-item"},l.a.createElement("div",{className:"main-info"},l.a.createElement("img",{src:a,width:"32",height:"32",className:"avatar",alt:""}),l.a.createElement("p",{className:"brief",dangerouslySetInnerHTML:{__html:n}})),l.a.createElement("p",{className:"time"},h()(e.time).fromNow()))):""}}]),t}(l.a.Component),p=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(r.a)(t).call(this,e))).onClick=function(){a.state.showNotice?(u.a.updateNotifications(),a.setState({showNotice:!1,unseenCount:0})):(a.loadNotices(),a.setState({showNotice:!0}))},a.loadNotices=function(){u.a.listNotifications(1,5).then((function(e){var t=e.data.notification_list;a.setState({noticeList:t})}))},a.onNoticeItemClick=function(e){var t=a.state.noticeList.map((function(t){return t.id===e.id&&(t.seen=!0),t}));u.a.markNoticeAsRead(e.id);var n=0===a.state.unseenCount?0:a.state.unseenCount-1;a.setState({noticeList:t,unseenCount:n})},a.state={showNotice:!1,unseenCount:0,noticeList:[]},a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;u.a.getUnseenNotificationCount().then((function(t){e.setState({unseenCount:t.data.unseen_count})}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"notifications"},l.a.createElement("span",{onClick:this.onClick,className:"no-deco a-simulate",id:"notice-icon",title:"Notifications","aria-label":"Notifications"},l.a.createElement("span",{className:"dtable-font dtable-icon-bell"}),l.a.createElement("span",{className:"num ".concat(this.state.unseenCount?"":"hide")},this.state.unseenCount)),l.a.createElement("div",{id:"notice-popover",className:"sf-popover ".concat(this.state.showNotice?"":"hide")},l.a.createElement("div",{className:"outer-caret up-outer-caret"},l.a.createElement("div",{className:"inner-caret"})),l.a.createElement("div",{className:"sf-popover-hd ovhd"},l.a.createElement("h3",{className:"sf-popover-title title"},Object(m.A)("Notifications")),l.a.createElement("span",{onClick:this.onClick,title:Object(m.A)("Close"),"aria-label":Object(m.A)("Close"),className:"a-simulate sf-popover-close js-close dtable-font dtable-icon-x- action-icon float-right"})),l.a.createElement("div",{className:"sf-popover-con"},l.a.createElement("ul",{className:"notice-list"},this.state.noticeList.map((function(t){return l.a.createElement(b,{key:t.id,noticeItem:t,onNoticeItemClick:e.onNoticeItemClick})}))),l.a.createElement("a",{href:m.V+"notification/list/",className:"view-all"},Object(m.A)("See All Notifications")))))}}]),t}(l.a.Component);t.a=p},262:function(e,t,a){"use strict";var n=a(67),s=a(6),i=a(7),r=a(10),o=a(8),c=a(58),l=a(9),u=a(0),m=a.n(u),d=a(42),h=a.n(d),b=a(14),p=a(2),f=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).onClickHandler=function(){var e=a.props.item;a.props.onItemClickHandler(e)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.item;return m.a.createElement("li",{className:"dtable-search-result-item",onClick:this.onClickHandler},m.a.createElement("span",{className:"dtable-font dtable-icon-table"}),m.a.createElement("div",{className:"item-content"},m.a.createElement("div",{className:"item-name ellipsis"},e.name)))}}]),t}(m.a.Component),g=a(126),v=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).onFocusHandler=function(){a.setState({width:"30rem",isMaskShow:!0,isCloseShow:!0})},a.onCloseHandler=function(){a.resetToDefault()},a.onItemClickHandler=function(e){a.resetToDefault(),a.props.onSearchedClick(e)},a.onChangeHandler=function(e){var t=Object(c.a)(a);a.setState({value:e.target.value});var n=e.target.value;if(a.inputValue===n.trim())return!1;if(a.inputValue=n.trim(),""===a.inputValue||t.getValueLength(a.inputValue)<3)return a.setState({isResultShow:!1,isResultGetted:!1}),!1;var s={q:n};a.timer&&clearTimeout(a.timer),a.timer=setTimeout(t.getSearchResult(s),500)},a.onSearchToggle=function(){a.setState({isSearchInputShow:!a.state.isSearchInputShow,isMaskShow:!a.state.isMaskShow})},a.state={width:"default",value:"",resultItems:[],isMaskShow:!1,isResultShow:!1,isResultGetted:!1,isCloseShow:!1,isSearchInputShow:!1},a.inputValue="",a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"getSearchResult",value:function(e){this.setState({isResultShow:!0,isResultGetted:!1}),this.sendRequest(e)}},{key:"sendRequest",value:function(e){var t=this;b.a.listWorkspaces().then((function(a){var s=a.data.workspace_list.filter((function(e){return new g.a(e)})),i=[];s.forEach((function(t){var a=t.table_list.filter((function(t){return t.name.indexOf(e.q)>-1}));a.length>0&&i.push.apply(i,Object(n.a)(a))})),t.setState({resultItems:i,isResultGetted:!0})}))}},{key:"getValueLength",value:function(e){for(var t,a=0,n=0;a<e.length;a++)10===(t=e.charCodeAt(a))?n+=2:t<127?n+=1:t>=128&&t<=2047?n+=2:t>=2048&&t<=65535&&(n+=3);return n}},{key:"resetToDefault",value:function(){this.inputValue=null,this.setState({width:"",value:"",isMaskShow:!1,isCloseShow:!1,isResultShow:!1,isResultGetted:!1,resultItems:[],isSearchInputShow:!1})}},{key:"renderSearchResult",value:function(){var e=this;if(this.state.isResultShow)return!this.state.isResultGetted||this.getValueLength(this.inputValue)<3?m.a.createElement("span",{className:"loading-icon loading-tip"}):this.state.resultItems.length?m.a.createElement("ul",{className:"search-result-list"},this.state.resultItems.map((function(t){return m.a.createElement(f,{key:t.id,item:t,onItemClickHandler:e.onItemClickHandler})}))):m.a.createElement("div",{className:"search-result-none"},Object(p.A)("No results matching."))}},{key:"render",value:function(){var e={width:"default"!==this.state.width?this.state.width:""};return m.a.createElement(u.Fragment,null,m.a.createElement(h.a,{query:"(min-width: 768px)"},m.a.createElement("div",{className:"search"},m.a.createElement("div",{className:"search-mask ".concat(this.state.isMaskShow?"":"hide"),onClick:this.onCloseHandler}),m.a.createElement("div",{className:"search-container"},m.a.createElement("div",{className:"input-icon"},m.a.createElement("i",{className:"search-icon-left input-icon-addon dtable-font dtable-icon-search"}),m.a.createElement("input",{type:"text",className:"form-control search-input",name:"query",placeholder:this.props.placeholder,style:e,value:this.state.value,onFocus:this.onFocusHandler,onChange:this.onChangeHandler,autoComplete:"off"}),this.state.isCloseShow&&m.a.createElement("i",{className:"search-icon-right input-icon-addon dtable-font dtable-icon-cancel",onClick:this.onCloseHandler})),m.a.createElement("div",{className:"search-result-container"},this.renderSearchResult())))),m.a.createElement(h.a,{query:"(max-width: 767.8px)"},m.a.createElement("div",{className:"search-icon-container"},m.a.createElement("i",{className:"search-icon dtable-font dtable-icon-search",onClick:this.onSearchToggle})),this.state.isSearchInputShow&&m.a.createElement("div",{className:"search"},m.a.createElement("div",{className:"search-mask ".concat(this.state.isMaskShow?"":"hide"),onClick:this.onCloseHandler}),m.a.createElement("div",{className:"search-container"},m.a.createElement("div",{className:"input-icon"},m.a.createElement("input",{type:"text",className:"form-control search-input",name:"query",placeholder:this.props.placeholder,style:e,value:this.state.value,onFocus:this.onFocusHandler,onChange:this.onChangeHandler,autoComplete:"off"}),m.a.createElement("i",{className:"search-icon-left input-icon-addon dtable-font dtable-icon-search",style:{right:0}})),m.a.createElement("div",{className:"search-result-container"},this.renderSearchResult())))))}}]),t}(u.Component);t.a=v},314:function(e,t,a){},728:function(e,t,a){e.exports=a(1365)},790:function(e,t,a){},791:function(e,t,a){}},[[728,1,0]]]);
//# sourceMappingURL=settings.chunk.js.map